\documentclass[12pt]{article}
% Paquetes básicos primero
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{ragged2e}
\usepackage{textcomp}
\usepackage{gensymb}
\usepackage{siunitx} 
\usepackage[spanish]{babel}
\usepackage{multicol}

% Geometría y diseño
\usepackage{geometry}
\geometry{
	letterpaper,
	left=2.5cm,
	right=2.5cm,
	top=3cm,
	bottom=3cm,
	headheight=60pt,
	headsep=1cm
}

% Paquetes de formato
\usepackage{setspace}
\usepackage{graphicx}
\usepackage{fancyhdr}
\usepackage{xcolor}
\usepackage{enumitem}
\usepackage{lastpage}
\usepackage{background}
\usepackage{listings}
\usepackage{tcolorbox}
\usepackage{fontawesome}
\usepackage{titlesec}
\usepackage{float}

% Paquetes para referencias
\usepackage[round]{natbib}  % Configuración específica para citas
\bibliographystyle{plainnat}  % Estilo de bibliografía

% URLs y enlaces (hyperref debe ir al final)
\usepackage{url}
\usepackage[hidelinks]{hyperref}

% Configuración de colores personalizados
\definecolor{tecnmBlue}{RGB}{0, 43, 89}
\definecolor{tecnmWhite}{RGB}{255, 255, 255}
\definecolor{codeBackground}{RGB}{240,240,240}
\definecolor{comentarios}{RGB}{63,127,95}
\definecolor{identificador}{RGB}{127,0,85}
\definecolor{cadena}{RGB}{42,0,255}
\definecolor{arduinoBlue}{RGB}{0,129,132}

% Configuración de listings para código Arduino
\setlength{\tabcolsep}{0.5pt} % Ajusta esto fuera del estilo

\lstdefinestyle{arduinoStyle}{
	language=C++,
	backgroundcolor=\color{codeBackground},
	basicstyle=\ttfamily\scriptsize,
	columns=fixed,        % Cambiado a fixed para control exacto
	basewidth={0.5em},    % Controla el ancho base de los caracteres
	basewidth=0.4em,      % Hace los espacios más pequeños
	breaklines=true,
	captionpos=b,
	commentstyle=\color{comentarios},
	keywordstyle=\color{identificador},
	stringstyle=\color{cadena},
	numbers=left,
	numberstyle=\tiny\color{gray},
	stepnumber=1,
	numbersep=2pt,
	showspaces=false,
	showstringspaces=false,
	frame=single,
	frameround=tttt,
	framesep=1mm,
	rulecolor=\color{arduinoBlue},
	emph={pinMode,digitalWrite,HIGH,LOW,INPUT,OUTPUT,tone,noTone,delay,delayMicroseconds,millis,INPUT_PULLUP},
	emphstyle={\color{blue}\bfseries},
	morekeywords={setup,loop},
	linewidth=\columnwidth,
	xleftmargin=0.3cm,
	xrightmargin=0.3cm,
	float=h,
	floatplacement=H,
	belowskip=-0.2cm,
	aboveskip=0.2cm
}

% Configuración de cajas personalizadas
\newtcolorbox{componentBox}[2][]{
	colback=tecnmBlue!5,
	colframe=tecnmBlue!40!black,
	title=#2,
	width=\columnwidth,
	#1
}

% Configuración del encabezado y pie de página
\pagestyle{fancy}
\fancyhf{}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}

% Definir comandos para reducir la carga
\newcommand{\smallgray}[1]{{\scriptsize\textcolor{gray}{#1}}}

\fancyhead[L]{%
	\hspace*{0.5cm}\raisebox{-2.2\height}{\includegraphics[height=1cm]{images/logotecnm.png}}%
}
\fancyhead[R]{%
	\raisebox{-1.7\height}{%
		\begin{tabular}[b]{r}
			{\scriptsize\textbf{Instituto Tecnológico de Morelia}}\\[-0.6em]
			\smallgray{Subdirección Académica}\\[-0.6em]
			\smallgray{Departamento de Sistemas y Computación}\\[-0.6em]
			\smallgray{Laboratorio de Sistemas Programables}\\[-0.4em]
			{\scriptsize Página \thepage\ de \pageref{LastPage}}
		\end{tabular}%
	}%
}

\makeatletter
\renewcommand\@biblabel[1]{#1.}
\makeatother

\fancyfoot[L]{%
	\small
	Implementación de un Transistores BJT y MOSFET
	
	\vspace{0.1cm}
	
	\small\textcolor{gray}{Plantilla de Reporte Laboratorio Sistemas Programables}
}
\fancyfoot[R]{%
	\small
	\textbf{Equipo 1}%
}

% Definir comando para citas
\newcommand{\cita}[1]{\cite{#1}}

% Estilo de títulos
\titleformat{\section}
{\color{tecnmBlue}\Large\bfseries}
{\thesection}{1em}{}

\titleformat{\subsection}
{\color{tecnmBlue}\large\bfseries}
{\thesubsection}{1em}{}

% Configuración de siunitx
\sisetup{
	detect-all,
	detect-family,
	per-mode=symbol,
	range-phrase=--,
	range-units=single,
	output-decimal-marker={,}
}

\begin{document}
	\pagenumbering{arabic}
	
	% Portada (una columna)
	\input{sections/portada}
	% Inicio de dos columnas para el contenido principal
	\begin{multicols}{2}
		\setlength{\columnsep}{1cm} % Espacio entre columnas
		\tableofcontents
		\listoffigures
		\input{sections/introduccion}
		%\input{sections/desarrollo}
		%\input{sections/documentacion}
	\end{multicols}
	% Referencias (una columna)
	\clearpage
	\addcontentsline{toc}{section}{Referencias}
	\bibliography{referencias}
	
\end{document}